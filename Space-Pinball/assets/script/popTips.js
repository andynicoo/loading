//æ¸¸æˆæç¤ºæ–‡å­—
cc.Class({
    extends: cc.Component,
    properties: {
        label: cc.Label
    },
    onLoad() {
        this.contents = [
            'åŽ»çž„çž„é«˜åˆ†ç§˜ç±~',
            'å‘¼.z..zZ.å‘¼å‘¼...zZ~',
            'äººå‘¢ï¼Ÿåœ°çƒäººéƒ½è¢«æŠ“èµ°äº†å—~',
            'å°çº¢çƒèƒ½èŽ·å¾—æ›´å¤šåˆ†å–”~ ç‚¹äº®UpGradeç¯',
            'æ¸¸æˆä¸­ä¹Ÿæœ‰å¢žåŠ å°çƒçš„æ–¹æ³•å–”~ ç‚¹äº®BALL+1ç¯',
            'åŒä¸€ç»„åˆç¯ï¼Œå†æ¬¡è§¦å‘ç¡®è®¤å¾—åˆ†å–”~',
            'é«˜æ‰‹æ”»ç•¥æ¥è¿™é‡Œå‘€~',
            'æŒ‰ä½å·¦åŠå±å¹•æŽ§åˆ¶å·¦ä¾§å¼¹æ¿å–”~',
            'æŒ‰ä½å³åŠå±å¹•æŽ§åˆ¶å³ä¾§å¼¹æ¿å–”~',
            'å‘å°„å°çƒæ—¶ï¼ŒæŒ‰ä½å±å¹•è¶Šä¹…ï¼Œå¼¹ç°§åŠ›åº¦è¶Šå¤§å–”~',
            'Superiseé—ªç¯æ˜¯ä¸ªå¤§ç¤¼ç‰©~',
            'é¡¶éƒ¨MULTIå…¨éƒ¨ç‚¹äº®ï¼Œåˆ†æ•°ç¿»å€å–”~',
            'ç»„åˆç¯æœ€é«˜å¯ä»¥èŽ·å¾—ä¸€ç™¾ä¸‡åˆ†å–”~',
            'ä¸€ç›´æŒ‰ä½å±å¹•ï¼Œå·¦å³å¼¹æ¿ä¹Ÿå¯ä»¥ä¸é‡Šæ”¾çš„å–”~',
            'å¥½çŽ©å°±è®°å¾—åˆ†äº«ç»™å¥½å‹å–”~',
            'è€æ¿ï¼Œä½ å¥½~',
            'æ‹¯æ•‘åœ°çƒäººï¼Œå°±é ä½ å•¦~',
            'é¼“åŠ±ï¼é¼“åŠ±é¼“åŠ±ï¼~',
            'å–œæ¬¢å°±åŠ åˆ°â€œæˆ‘çš„å°ç¨‹åºâ€å–”~',
            'ç”Ÿå‘½ä¸æ¯ï¼Œå¥‹æ–—ä¸æ­¢~',
            'ä½ å¥½åŽ‰å®³å–”ï¼Œå’‹ä¸ä¸Šå¤©~',
            'ä¼‘æ¯ä¸€ä¸‹ï¼ŒçŽ©ä¸€å±€~',
            'æŒ‰é—ªçƒç®­å¤´æŒ‡ç¤ºï¼Œå¾€å¾€ä¼šå¾—åˆ°é«˜åˆ†~',
            'å°å¿ƒçƒè¢«åƒæŽ‰å–”~ ä¸è¿‡ä¹Ÿä¼šæœ‰æƒŠå–œ~',
            'å¤šæ¬¡è§¦å‘åŒä¸€ç»„åˆï¼Œäº®èµ·æ›´é«˜çº§åˆ«æŒ‡ç¤ºç¯~',
            'ä¹è¶£ï¼Œå°±æ˜¯è‡ªå·±æŽ¢ç´¢~',
            'æ²¡æœ‰ä»€ä¹ˆä¸å¯èƒ½~',
            'å¸¦ä¸Šè€³æœºä½“éªŒæ•ˆæžœæ›´å¥½å–”~',
            'æˆ‘å‘çŽ°ä½ éª¨éª¼æ¸…å¥‡ï¼Œä¸€å®šæ˜¯å¹²å¤§äº‹çš„~',
            'çˆ¬èµ·æ¥æ¯”è·Œå€’å¤šä¸€æ¬¡å°±æ˜¯æˆåŠŸ~',
            'ä¸–ç•Œä¸Šæ¯”æ•™è‚²å°å­©æ›´éš¾çš„æ˜¯æ—©ç¡æ—©èµ·~',
            'ä½ å–œæ¬¢çŽ©æ¸¸æˆå—ï¼Ÿåæ­£æˆ‘å–œæ¬¢~',
            'æ¸¸æˆæŒç»­ä¼˜åŒ–æ›´æ–°ä¸­ï¼Œè°¢è°¢æ‚¨çš„å…³æ³¨~',
            'é­…æžœä½¬ä¸€å®šä¼šåž®æŽ‰çš„~',
            'ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ä¸‡å²~ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³',
            'ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³ðŸ‡¨ðŸ‡³æ˜¯åœ°çƒäººçš„å¸Œæœ›~',
            'æœ‰éƒ¨åŠ¨ç”»ç‰‡è¿˜ä¸é”™ï¼Œå«..å«.. åå­—æˆ‘å¿˜äº†~',
            'æœ‰ç©ºåŽ»çœ‹çœ‹ä¸€ä¸ªå«â€œè·¯é£žâ€çš„å®¶ä¼™~',
            'æˆ‘äº²çˆ±çš„æˆ˜å‹ï¼Œä½ è¿‡çš„è¿˜å¥½å—ï¼Ÿ~',
            'æˆ‘äº²çˆ±çš„é«˜ä¸­åŒå­¦ï¼Œä½ ä¸€å®šè¦å¥½å¥½çš„~',
            'ç¡åœ¨æˆ‘ä¸Šé“ºçš„å…„å¼Ÿï¼Œä½ è¿˜å¥½å§~',
            'åˆ†ç»™æˆ‘çƒŸæŠ½çš„å…„å¼Ÿï¼Œæˆ‘åˆæ²¡çƒŸæŠ½äº†~',
            'æ–°çš„ä¸€å¤©ï¼Œæ–°çš„å¼€å§‹ï¼Œæ–°çš„å¸Œæœ›~',
        ];
        
        
        this.contentsCache = this.contents.slice(0);
        this.label.node.on(cc.Node.EventType.SIZE_CHANGED,this.sizeChanged,this);
        this.node.on(cc.Node.EventType.TOUCH_START,this.tap,this);
        this.taping = false;
    },
    //åˆå§‹åŒ–ï¼Œhomeåœºæ™¯åŠ è½½å®Œè°ƒç”¨
    init(){
        this.tap();
        this.auto = setInterval(()=>{
            this.tap();
        },4500)
    },
    //æ”¹å˜çˆ¶å®¹å™¨çš„å¤§å°
    sizeChanged(){
        let bothSideSpace = 40;
        this.node.width = this.label.node.width + bothSideSpace;
    },

    //åˆ¤æ–­æ˜¯å¦æ­£åœ¨æ‰“å‡ºæ–‡å­—
    tap(){
        if(this.taping){
            return;
        }
        this.taping = true;
        this.showOne();
    },
    //æ‰“å‡ºæ–‡å­—åŠ¨ä½œ
    showOne(){
        if(!this.contentsCache.length){
            this.contentsCache = this.contents.slice(0);
        }
        let random = Math.floor(Math.random()*this.contentsCache.length);
        let content = this.contentsCache[random];
        this.contentsCache.splice(random,1);
        let arr = content.split('');
        let delay = 70;
        let index = 0;
        let str = '';
        this.interval = setInterval(() => {
            if(index >= content.length){
                this.taping = false;
                clearInterval(this.interval);
                return;
            }
            str = str + arr[index];
            index++;
            this.label.string = str;
        }, delay);
    },
    clearTap(){
        clearInterval(this.auto);
    }
    
});